import { Component } from '@angular/core';
import { Validators } from '@angular/forms';
import { FormControl, FormGroup } from '@angular/forms';

@Component({
  selector: 'app-dd-form',
  templateUrl: './dd-form.component.html',
  styleUrl: './dd-form.component.css'
})
export class DdFormComponent {
  myForm!: FormGroup
  uname!: FormControl
  pass!: FormControl
  email!: FormControl
  city!: FormControl

  createForm() {
    this.myForm = new FormGroup({
      uname: this.uname,
      pass: this.pass,
      email: this.email,
      city: this.city
    })
  }
  createFormControl() {
    this.uname = new FormControl('',[Validators.required,Validators.minLength(6)])
    this.pass = new FormControl('')
    this.email = new FormControl('',[this.emailDomainValidator])
    this.city = new FormControl('')
  }
constructor(){
  this.createFormControl()
  this.createForm()
}
addUser(){
  console.log(this.myForm.value);
  
}
emailDomainValidator(control:FormControl){
  let email= control.value
  if(email && email.indexOf('@')!=- 1){
  let [before,domain]= email.split('@')
    if(domain != 'siemens.com'){
      return {
        emailDomain:{
          pd: domain
        }
      }
    }
  }
return null
}

}
